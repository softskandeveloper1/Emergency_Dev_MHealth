@using MHealth.Helper;
@using DAL.Models;
@using DAL.Utils;
@model PaginatedList<mp_clinician>
@{
    ViewData["Title"] = "Applicants";
    var lookups = ViewHelper.GetAllLookUps();

    var dic_table_status = new Dictionary<string, string>();
    dic_table_status.Add("Pending", "tb-primary");
    dic_table_status.Add("Awaiting Interview", "tb-info");
    dic_table_status.Add("Hired", "tb-success");
    dic_table_status.Add("Incomplete", "tb-warning");
    dic_table_status.Add("Stopped", "tb-danger");


}



<div class="row">
    <div class="col-lg-10">
        <nav class="" aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="@Url.Action("Index", "Home")">Home</a></li>
                <li class="breadcrumb-item"><a href="#">Applicants</a></li>
                <li class="active breadcrumb-item" aria-current="page">Applicants</li>

            </ol>

        </nav>
    </div>
    <div class="col-lg-2">
        <div class="pull-right mb-3">
            @if (User.IsInRole("admin") || User.IsInRole("super_admin"))
            {
                @await Html.PartialAsync("../Shared/_quick_nav")
            }
        </div>
    </div>
</div>


<div class="row">
    <div class="col-md-12">
        <div class="main-card mb-3 card">
            <div class="card-header">
                <div class="card-header-title">
                    All Applicants
                </div>
                <div class="btn-actions-pane-right">

                    <form method="get" action="@Url.Action("Providers","Applicant")">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="input-group">

                                    @Html.DropDownList("application_status", new SelectList(Options.Getlookups("application_status"), "id", "value", ViewBag.application_status), "Select status", new { @class = "form-control", @required = "required" })

                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="input-group">

                                    <input type="text" class="form-control" value="@ViewBag.query" name="query" placeholder="search.....">
                                    <div class="input-group-append">
                                        <button class="btn btn-info" type="submit"><i class="fa fa-search"></i></button>
                                    </div>


                                </div>
                            </div>
                        </div>


                    </form>
                </div>

                @*All Applicants
                    <div class="btn-actions-pane-right">
                        <div role="group" class="btn-group-sm btn-group">
                            <button class="active btn btn-focus">All</button>
                            <button class="btn btn-focus">
                                Incomplete
                            </button>
                            <button class="btn btn-focus">Pending</button>
                            <button class="btn btn-focus">Hired</button>
                            <button class="btn btn-focus">Awaiting Interview</button>
                            <button class="btn btn-focus">Stopped</button>
                        </div>
                    </div>*@
            </div>
            <div class="card-body">
                <div class="table-responsive">



                    <table class="align-middle mb-0 table table-condensed table-hover">
                        <thead>
                            <tr>
                                @* <th>#</th> *@
                                <th>Name</th>
                                <th>Phone</th>
                                <th>Email</th>
                                <th>Gender</th>
                                <th>Age (yrs)</th>
                                <th>Area of specialty</th>
                                <th>Years of experience</th>
                                <th>Registration Progress</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {

                                <tr>
                                    @* <td class="text-center text-muted">#</td> *@
                                    <td>
                                        <div class="widget-content p-0">
                                            <div class="widget-content-wrapper">
                                                @*<div class="widget-content-left mr-3">
                                                        <div class="widget-content-left">
                                                            <img width="40" class="rounded-circle" src="@Url.Action("get_applicant_image","Applicant",new {applicant_id=item.id})" alt="">
                                                        </div>
                                                    </div>*@
                                                <div class="widget-content-left flex2">
                                                    <div class="widget-heading"><a href="@Url.Action("Provider", "Applicant", new { id = item.id })"> @string.Format("{0} {1}", item.last_name, item.first_name) </a></div>
                                                    @*<div class="widget-subheading opacity-7">@(item.gender == 1 ? "Male" : "Female"), @item.countryNavigation.name, @item.stateNavigation?.name</div>*@
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>@item.phone</td>
                                    <td>@item.email</td>
                                    <td>
                                        @Options.GetLookupName(item.gender)
                                    </td>
                                    <td>
                                        @TimeUtil.CalculateAge(item.dob)
                                    </td>
                                    <td>
                                        @(item.area_of_interest != null ? Options.GetLookupName(item.area_of_interest.Value) : "")
                                    </td>
                                    <td>
                                        @item.years_of_experience
                                    </td>
                                    <td>
                                        @Options.GetLookupName(item.status)
                                    </td>
                                    <td>
                                        <a asp-action="Provider" asp-route-id="@item.id" class="btn btn-primary btn-sm">Details</a>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>

                    @{
                        var prevDisabled = !Model.HasPreviousPage ? "disabled" : "";
                        var nextDisabled = !Model.HasNextPage ? "disabled" : "";
                    }
                    <div style="margin-left:auto;margin-right:auto;margin-top:10px">
                        <nav class="" aria-label="pagination">
                            <ul class="pagination pagination-sm">
                                <li class="page-item"><a href="@Url.Action("Providers","Applicant",new {pageNumber=Model.PageIndex - 1,search=ViewBag.query})" class="page-link @prevDisabled" aria-label="Previous"><span aria-hidden="true">Previous</span><span class="sr-only">Previous</span></a></li>

                                <li class="page-item"><a href="@Url.Action("Providers","Applicant",new {pageNumber=Model.PageIndex + 1,search=ViewBag.query})" class="page-link @nextDisabled" aria-label="Next"><span aria-hidden="true">Next</span><span class="sr-only">Next</span></a></li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>


        </div>
    </div>
</div>

@section styles{
    <link href="~/css/table.css" type="text/css" rel="stylesheet" />
    <style>
        a.disabled {
            pointer-events: none;
            cursor: default;
        }
    </style>

}